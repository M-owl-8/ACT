â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                 ACT Gen-1: 502 Bad Gateway - QUICK FIX                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ THE PROBLEM
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âŒ Login Error: [AxiosError: Request failed with status code 502]

Root Cause: Backend not binding to correct host interface
            Backend binds to 127.0.0.1 (localhost only)
            Emulator needs 0.0.0.0 (all interfaces) to connect


âœ… THE FIX
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
OPTION 1: AUTOMATED (RECOMMENDED)
  1. Run: .\FIX_502_FOREVER.ps1
  2. Waits for completion
  3. Run: .\START_BACKEND_AND_MOBILE.ps1

OPTION 2: MANUAL
  Terminal 1:
  â”œâ”€ cd c:\Users\user\Desktop\Bitway\Programs\act-gen1\apps\api
  â”œâ”€ .\.venv\Scripts\Activate.ps1
  â””â”€ uvicorn main:app --reload --host 0.0.0.0 --port 8000
                                        ^^^^^^^^ KEY: NOT 127.0.0.1!

  Terminal 2:
  â”œâ”€ cd c:\Users\user\Desktop\Bitway\Programs\act-gen1\apps\mobile
  â””â”€ npm run android


ğŸ”‘ KEY POINTS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. MUST use: --host 0.0.0.0  (NOT 127.0.0.1)
2. MUST see: "âœ… ACT Gen-1 API is ready!" message
3. MUST wait for backend to fully start before launching app
4. MUST check: http://localhost:8000/health returns {"status": "ok"}


ğŸ“¡ NETWORKING REFERENCE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
From Your Computer:         http://localhost:8000
From Android Emulator:      http://10.0.2.2:8000  â† App uses this
API Docs (Your Computer):   http://localhost:8000/docs
Database File:              apps/api/dev.db


âœ… SUCCESS INDICATORS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Backend Terminal:
  âœ“ "ğŸš€ Starting ACT Gen-1 API..."
  âœ“ "âœ“ Database tables ready"
  âœ“ "âœ“ Default data seeded"
  âœ“ "âœ… ACT Gen-1 API is ready!"
  âœ“ "INFO: Uvicorn running on http://0.0.0.0:8000"

Browser (http://localhost:8000/docs):
  âœ“ Shows Swagger UI with all endpoints
  âœ“ Can test endpoints directly

App:
  âœ“ No 502 errors
  âœ“ Can register new account
  âœ“ Can login successfully


âŒ STILL GETTING 502?
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Check backend command has: --host 0.0.0.0
2. Check port 8000 is free: Get-NetTCPConnection -LocalPort 8000
3. Check http://localhost:8000/health works
4. Check Windows Firewall allowing port 8000
5. Run: .\FIX_502_FOREVER.ps1 for full diagnostic


ğŸš€ QUICK START COMMANDS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Diagnose Issues:
  .\FIX_502_FOREVER.ps1

Start Backend Only:
  .\START_BACKEND_FIXED.ps1

Start Both Backend + App:
  .\START_BACKEND_AND_MOBILE.ps1

Test Health Endpoint:
  Invoke-RestMethod -Uri http://localhost:8000/health


ğŸ“ FILES FOR REFERENCE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
FIX_502_FOREVER.ps1              â† Comprehensive diagnostic and fix
START_BACKEND_FIXED.ps1          â† Correct backend startup
START_BACKEND_AND_MOBILE.ps1     â† Start both (fixed)
FIX_502_EXPLANATION.md           â† Detailed explanation
502_FIX_QUICK_REFERENCE.txt      â† This file

Mobile Config:
  apps/mobile/src/api/client.ts  (uses http://10.0.2.2:8000 for emulator)

Backend Config:
  apps/api/.env                  (DATABASE_URL, JWT_SECRET)
  apps/api/main.py              (CORS, host binding)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Last Updated: 2025-01-22
For more info, see: FIX_502_EXPLANATION.md
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•